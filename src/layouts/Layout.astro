---
import '@/styles/global.css'

import { SEO } from 'astro-seo'
import { PopupMenu } from '@/components/PopupMenu'
---

<script is:inline>
	const getThemePreference = () => {
		if (typeof localStorage !== 'undefined' && localStorage.getItem('theme')) {
			return localStorage.getItem('theme');
		}
		return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
	};
	const isDark = getThemePreference() === 'dark';
	document.documentElement.classList[isDark ? 'add' : 'remove']('dark');
 
	if (typeof localStorage !== 'undefined') {
		const observer = new MutationObserver(() => {
			const isDark = document.documentElement.classList.contains('dark');
			localStorage.setItem('theme', isDark ? 'dark' : 'light');
		});
		observer.observe(document.documentElement, { attributes: true, attributeFilter: ['class'] });
	}
</script>

<html lang="en">
	<head>
		<SEO
    		title="StartPage | Your Smart Browser Hub"
    		titleTemplate="%s | freitaseric"
    		description="A lightweight, browser-optimized start page. Get quick access to exclusive resources, developer tools, and a customizable dashboard that the standard new tab misses."
    		canonical="https://start.freitaseric.com"
    		openGraph={{
        		basic: {
            		title: "Upgrade Your New Tab - StartPage by freitaseric",
            		type: "website",
            		image: new URL("/og-image.png", Astro.site).toString(),
        		},
        		optional: {
            		description: "Replace your default home with a productivity-focused dashboard and advanced features.",
            		siteName: "freitaseric StartPage",
        		}
    		}}
    		twitter={{
        		card: "summary_large_image",
        		creator: "@freitaseric",
        		title: "Your new favorite start page",
        		description: "Minimalist, fast, and packed with features browsers forgot to include.",
        		image: new URL("/og-image.png", Astro.site).toString(),
    		}}
    		extend={{
        		link: [
            		{ rel: "icon", href: "/favicon.ico", sizes: "32x32" },
            		{ rel: "icon", href: "/favicon.svg", type: "image/svg+xml" },
            		{ rel: "icon", href: "/favicon-96x96.png", type: "image/png", sizes: "96x96" },
            		{ rel: "apple-touch-icon", href: "/apple-touch-icon.png" },
            		{ rel: "manifest", href: "/site.webmanifest" }
        		],
        		meta: [
            		{ name: "theme-color", content: "#a881f1" }, 
        		],
    		}}
		/>
		<meta name="generator" content={Astro.generator} />
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
	</head>
	<body>
		<PopupMenu client:load />
		<slot/>
	</body>
</html>

